function onSignInCallback(o){oauth.onSignInCallback(o)}var oauth=function(){return{onSignInCallback:function(o){o.access_token?(this.authResult=o,oauth.connectServer(),$("#gConnect").hide()):o.error&&console.log("There was an error: "+o.error)},disconnectServer:function(){$.ajax({type:"POST",url:window.location.href+"disconnect",async:!1,data:{token:oauth.authResult.code},success:function(o){console.log("revoke response: "+o)},error:function(o){console.log(o)}})},connectServer:function(){$.ajax({type:"POST",url:window.location.href+"connect?state="+STATE,contentType:"application/octet-stream; charset=utf-8",success:function(o){console.log("result:",o)},error:function(o){console.log(o)},processData:!1,data:this.authResult.code})}}}(),profileApp=angular.module("profileApp",[]);profileApp.controller("ProfileCtrl",function(o,n){n.get("profile").success(function(n){o.profile=n})}),$(document).ready(function(){$("#disconnect").on("click",oauth.disconnectServer)});