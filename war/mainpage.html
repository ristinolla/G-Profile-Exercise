<!--

/*
 *
 * Copyright 2013 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

-->

<html ng-app="profileApp">
<head>
  <title>{{ APPLICATION_NAME }}</title>
  <script type="text/javascript">
  (function() {
    var po = document.createElement('script');
    po.type = 'text/javascript'; po.async = true;
    po.src = 'https://plus.google.com/js/client:plusone.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(po, s);
  })();
  </script>
  <!-- JavaScript specific to this application that is not related to API
     calls -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" ></script>
</head>
<body>
  <div class="buttons">
    <div id="gConnect">
      <button class="g-signin"
          data-scope="https://www.googleapis.com/auth/plus.login"
          data-requestvisibleactions="http://schemas.google.com/AddActivity"
          data-clientId="{{ CLIENT_ID }}"
          data-accesstype="offline"
          data-callback="onSignInCallback"
          data-theme="dark"
          data-cookiepolicy="single_host_origin">
      </button>
    </div>
    <button id="disconnect" >Disconnect your Google account from this app</button>
  </div>


  <div id="authOps" ng-controller="ProfileCtrl">
  
    <h2>User is now signed in to the app using Google+</h2>
    <p>If the user chooses to disconnect, the app must delete all stored
    information retrieved from Google for the given user.</p>
    
    <h2>User's profile information</h2>
    <p>This data is retrieved client-side by using the Google JavaScript API
    client library.</p>
    <div id="profile" ></div>

    <h2>User's friends that are visible to this app</h2>
    <p>This data is retrieved from your server, where your server makes
    an authorized HTTP request on the user's behalf.</p>
    <p>If your app uses server-side rendering, this is the section you
    would change using your server-side templating system.</p>
    <div id="visiblePeople"></div>

  </div>
  
</body>

<script type="text/javascript">
  var STATE = "{{ STATE }}";
</script>
<!--  <script src="/assets/vendor/angular/angular.js"></script> -->
<script src="/assets/vendor/underscore/underscore-min.js"></script>

<!--  <script src="/assets/js/renderer.js"></script> 
<script src="/assets/js/controllers.js"></script> -->
<script src="/assets/js/oauth.js"></script>

<script type="text/javascript">
   /**
   * Calls the helper method that handles the authentication flow.
   *
   * @param {Object} authResult An Object which contains the access token and
   *   other authentication information.
   */
  function onSignInCallback(authResult) {
    helper.onSignInCallback(authResult);
  }
</script>

<script type="text/javascript">
	/**
	 * Perform jQuery initialization and check to ensure that you updated your
	 * client ID.
	 */
	$(document).ready(function() {  
		$('#disconnect').on('click', helper.disconnectServer);
	});

</script>

</html>